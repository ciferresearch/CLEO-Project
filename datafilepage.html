<!DOCTYPE html>
<html>
  <head>
   <script src="https://cdn.jsdelivr.net/npm/web3@1.2.9/dist/web3.min.js"></script> 
    <script src="web3.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <title>Data File Page</title>
  </head>
  <body>
    <div id="banner">
      <h1>Secure Data Sharing Platform</h1>
    </div>

    <nav style="text-align: center; background-color: #f2f2f2; padding: 20px;">
      <ul style="list-style-type: none; margin: 0; padding: 0; display: inline-block;">
        <li style="margin-right: 10px; display: inline-block;"><a href="home.html" style="text-decoration: none; color: #555; padding: 10px 15px; border-radius: 4px; background-color: #f2f2f2; box-shadow: 0 2px 4px  #6f6e6e;">Home</a></li>
        <li style="margin-right: 10px; display: inline-block;"><a href="registerpage.html" style="text-decoration: none; color: #555; padding: 10px 15px; border-radius: 4px; background-color: #f2f2f2; box-shadow: 0 2px 4px  #6f6e6e;">Registration</a></li>
        <li style="margin-right: 10px; display: inline-block;"><a href="ownerpage.html" style="text-decoration: none; color: #555; padding: 10px 15px; border-radius: 4px; background-color: #f2f2f2; box-shadow: 0 2px 4px #6f6e6e;">Patient</a></li>
        <li style="margin-right: 10px; display: inline-block;"><a href="publisherpage.html" style="text-decoration: none; color: #555; padding: 10px 15px; border-radius: 4px; background-color:  #f2f2f2; box-shadow: 0 2px 4px #6f6e6e;">Publisher</a></li>
        <li style="margin-right: 10px; display: inline-block;"><a href="requestorpage.html" style="text-decoration: none; color: #555; padding: 10px 15px; border-radius: 4px; background-color:  #f2f2f2; box-shadow: 0 2px 4px #6f6e6e;">Requestor</a></li>
    
      </ul>
    </nav>

        <h2>Data File Description</h2>

        <table  class="styled-table" style="width:55%">
        

            <tr>
              <th>Data Identifier</th>
              <td id="fileid"></td>
          </tr>

          <tr>
            <th>Data Type</th>
            <td id="dataType"></td>
        </tr>
      
              <tr>
                  <th>File Name</th>
                  <td id="fileName"></td>
              </tr>
      
              <tr>
                <th>File Format</th>
                <td id="fileFormat"></td>
            </tr>
          <tr>
          <th>Data Version</th>
          <td id="dataVersion"></td>
      </tr>
      <tr>
        <th>Source Origin</th>
        <td id="sourceOrigin"></td>
    </tr>

    <tr>
      <th>Primary Investigator</th>
      <td id="PrivaryInvestigator"></td>
  </tr>

  <tr>
    <th>Data Description</th>
    <td id="dataDescripton"></td>
</tr>


      


       
          </table>

          <footer class="footer" style="background-color: #f2f2f2; padding: 20px;">
            <div style="background-color: #009879; height: 1px; width: 100%;"></div>
      
            <ul style="list-style-type: none; display: flex; justify-content: center; padding: 0;">
              <li style="margin-right: 10px;"><a href="#" style="text-decoration: none; color: #555;">Home</a></li>
              <li style="margin-right: 10px;"><a href="#" style="text-decoration: none; color:  #555;">About</a></li>
              <li style="margin-right: 10px;"><a href="#" style="text-decoration: none; color:   #555;">Services</a></li>
              <li><a href="#" style="text-decoration: none; color:  #555; ">Contact</a></li>
            </ul>
            <div  style="text-align: center;">
              <p>&copy; CLEO - Canadian Network for Learning Healthcare Systems and Cost-Effective 'Omics Innovation. All rights reserved.</p>
            </div>
         
          </footer>
     
        <script>

            const urlParams = new URLSearchParams(window.location.search);
             const dataID = urlParams.get("id");
            console.log(dataID)
    
          // Get the events emitted by the contract
          const events = contract.getPastEvents('depositEvent', {
            filter: { _hash: dataID },
            fromBlock: 0,
            toBlock: 'latest'
          }, (error, events) => {
            if (!error) {
              // Get the filename and description from the first event
              const owner = events[0].returnValues._owner;
              
              const datatype = events[0].returnValues._datatype;
              const filename = events[0].returnValues._filename;
              const fileformat = events[0].returnValues._fileFormat;
              const dataversion = events[0].returnValues._dataVersion;
              const sourceorigin = events[0].returnValues._sourceOrigin;
              const fileid = events[0].returnValues._hash;
              const primaryinvestigator = events[0].returnValues._primaryInves;
              const datadescripton = events[0].returnValues._dataDes;
             

              // Display the filename and description
              
              
              document.getElementById('dataType').innerHTML = datatype;
              document.getElementById('fileName').innerHTML = filename;
              document.getElementById('fileFormat').innerHTML = fileformat;
              document.getElementById('dataVersion').innerHTML = dataversion;
              document.getElementById('sourceOrigin').innerHTML = sourceorigin;
              document.getElementById('fileid').innerHTML = fileid;
              document.getElementById('PrivaryInvestigator').innerHTML = primaryinvestigator ;
              document.getElementById('dataDescripton').innerHTML = datadescripton;
          


    


            } else {
              console.error(error);
            }
          });
        </script>
      

    </body>