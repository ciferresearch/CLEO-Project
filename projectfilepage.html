<!DOCTYPE html>
<html>
  <head>
   <script src="https://cdn.jsdelivr.net/npm/web3@1.2.9/dist/web3.min.js"></script> 
    <script src="web3.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <title>Project Details</title>
  </head>
  <body>
    <div id="banner">
      <h1>Secure Data Sharing Platform</h1>
    </div>

   
    <nav style="text-align: center; background-color: #f2f2f2; padding: 20px;">
      <ul style="list-style-type: none; margin: 0; padding: 0; display: inline-block;">
        <li style="margin-right: 10px; display: inline-block;"><a href="home.html" style="text-decoration: none; color: #555; padding: 10px 15px; border-radius: 4px; background-color: #f2f2f2; box-shadow: 0 2px 4px #6f6e6e;">Home</a></li>
        <li style="margin-right: 10px; display: inline-block;"><a href="registerpage.html" style="text-decoration: none; color: #555; padding: 10px 15px; border-radius: 4px; background-color: #f2f2f2; box-shadow: 0 2px 4px #6f6e6e;">Registration</a></li>
        <li style="margin-right: 10px; display: inline-block;"><a href="ownerpage.html" style="text-decoration: none; color: #555; padding: 10px 15px; border-radius: 4px; background-color: #f2f2f2; box-shadow: 0 2px 4px #6f6e6e;">Patient</a></li>
        <li style="margin-right: 10px; display: inline-block;"><a href="publisherpage.html" style="text-decoration: none; color: #555; padding: 10px 15px; border-radius: 4px; background-color: #f2f2f2; box-shadow: 0 2px 4px #6f6e6e;">Publisher</a></li>
        <li style="margin-right: 10px; display: inline-block;"><a href="requestorpage.html" style="text-decoration: none; color: #555; padding: 10px 15px; border-radius: 4px; background-color: #f2f2f2; box-shadow: 0 2px 4px #6f6e6e;">Requestor</a></li>
    
      </ul>
    </nav>

    <br>

        <h2>Research Initative Description</h2>

        <table  class="styled-table" style="width:55%">
      

            <tr>
              <th>Project Owner</th>
              <td id="reqName"></td>
          </tr>
      
              <tr>
                  <th>Project Title</th>
                  <td id="projectTitle"></td>
              </tr>
              <tr>
                <th>Project Description</th>
                <td id="projectDes"></td>
            </tr>

            <tr>
              <th>Start Date</th>
              <td id="startDate"></td>
          </tr>

          <tr>
            <th>End Date</th>
            <td id="endDate"></td>
        </tr>
   
      <tr>
        <th>Expected Results </th>
        <td id="projectResults"></td>
    </tr>

        <tr>
          <th>Data Acess Duration</th>
          <td id="datacessDuration"></td>
      </tr>
            
         
            
        <tr>
          <th>Ethical Approval Details </th>
          <td id="ethicalApproval"></td>
      </tr>
      <tr>
        <th>Regulatory Compliance</th>
        <td id="compliance"></td>  
    </tr>
    <tr>
      <th>Feedback and Reporting period</th>
      <td id="reportingPeriod"></td>  
  </tr>

    

 
          </table>

          <footer class="footer" style="background-color: #f2f2f2; padding: 20px;">
            <div style="background-color: #009879; height: 1px; width: 100%;"></div>
      
            <ul style="list-style-type: none; display: flex; justify-content: center; padding: 0;">
              <li style="margin-right: 10px;"><a href="#" style="text-decoration: none; color: #555;">Home</a></li>
              <li style="margin-right: 10px;"><a href="#" style="text-decoration: none; color:  #555;">About</a></li>
              <li style="margin-right: 10px;"><a href="#" style="text-decoration: none; color:   #555;">Services</a></li>
              <li><a href="#" style="text-decoration: none; color:  #555; ">Contact</a></li>
            </ul>
            <div  style="text-align: center;">
              <p>&copy; CLEO - Canadian Network for Learning Healthcare Systems and Cost-Effective 'Omics Innovation. All rights reserved.</p>
            </div>
         
          </footer>
     
      <script>
            const urlParams = new URLSearchParams(window.location.search);
            const projectID = urlParams.get("id");
            console.log(projectID)
    
          // Get the events emitted by the contract
          const events = contract.getPastEvents('projectEvent', {
            filter: { _projecthash: projectID},
            fromBlock: 0,
            toBlock: 'latest'
          }, (error, events) => {
            if (!error) {
              // Get the filename and description from the first event
    
         
            //  const projectTitle = events[0].returnValues._projectTitle;
              const projectDes = events[0].returnValues._projectDes;
              const projectTitle = events[0].returnValues._projectTitle;
              const projectownerName=events[0].returnValues._projownerName;
              const startdate=new Date(events[0].returnValues._startdate * 1000)
              const enddate= new Date(events[0].returnValues._enddate * 1000);
              const projectResults=events[0].returnValues._projectResults;
              const dataaccessDuration=events[0].returnValues._projectDuration;
              const ethicalApproval=events[0].returnValues._projownerName;
              const compliance=events[0].returnValues._projectCompliance;
              const reportingPeriod=events[0].returnValues. _feedback;
      
         
             

              // Display the filename and description
              document.getElementById('reqName').innerHTML = projectownerName;
              document.getElementById('projectTitle').innerHTML = projectTitle;
              document.getElementById('projectDes').innerHTML = projectDes;
              document.getElementById('startDate').innerHTML = startdate;
              document.getElementById('endDate').innerHTML = enddate;
              document.getElementById('projectResults').innerHTML = projectResults;
              document.getElementById('datacessDuration').innerHTML = dataaccessDuration;
              document.getElementById('ethicalApproval').innerHTML = ethicalApproval;
              document.getElementById('compliance').innerHTML = compliance;
              document.getElementById('reportingPeriod').innerHTML = reportingPeriod;
 



            } else {
              console.error(error);
            }
          });


      </script>

    </body>

  